window.console=window.console||function(){var t={};t.log=t.warn=t.debug=t.info=t.error=t.time=t.dir=t.profile=t.clear=t.exception=t.trace=t.assert=function(){};return t}();(function(window,document,navigator){"use strict";function RTBViewability(){this.intersectionObserverSupported=!!window.IntersectionObserver;this.DEBUG_MODE=false;this.version="1.59";this.rtbhost="//trace2.rtbasia.com";this._surl=this.rtbhost+"/vbp?";this.uniqueID=Math.floor(Math.random()*1e8)+"0"+(new Date).getTime().toString();this.servingScenarioEnum={OnPage:1,SameDomainIframe:2,CrossDomainIframe:3};function getServingScenarioType(t){try{if(window.top==window){return t.OnPage}var e=window;while(e.parent!=e){if(e.parent.document.domain!=e.document.domain){return t.CrossDomainIframe}e=e.parent}return t.SameDomainIframe}catch(r){}return t.CrossDomainIframe}this.servingScenario=getServingScenarioType(this.servingScenarioEnum);this.IN_IFRAME=this.servingScenario!=this.servingScenarioEnum.OnPage;this.IN_XD_IFRAME=this.servingScenario==this.servingScenarioEnum.CrossDomainIframe;this.IN_SAME_IFRAME=this.servingScenario==this.servingScenarioEnum.SameDomainIframe;this.flashCheck=this.IN_XD_IFRAME&&!this.intersectionObserverSupported;this.sameIframeCheck=this.IN_SAME_IFRAME&&!this.intersectionObserverSupported;this.args={};this.cElemt=null;this.finger=null;this.lied=false;this.vbinfo=[];this.clicked=false;var intersectionObserverMonitor;var objToString=Object.prototype.toString;var fnToString=Function.prototype.toString;var reHostCtor=/^\[object .+?Constructor\]$/;var reNative=RegExp("^"+String(objToString).replace(/[.*+?^${}()|[\]\/\\]/g,"\\$&").replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var startWith=function(t,e){var r=new RegExp("^"+e,"i");return r.test(t)};this.isNative=function(t){var e=typeof t;return e=="function"?reNative.test(fnToString.call(t)):t&&e=="object"&&reHostCtor.test(objToString.call(t))||false};this.checkViewability=function(t,e,r,i,n,a){var o=this;o.initRTB(t);var s=e?e:o.rcallback;var c=r?r:20;var h=i?i:100;var u=n?n:15e3;var l=a?a:50;if(o.DEBUG_MODE){console.log("intervalTime: "+h+", intervalCount: "+c)}o.send_first(s,o);if(!t)return;addEvent(t,"click",function(){o.clicked=true;var t=o.args.click;if(t&&startWith(t,"http")){try{var e=t.toString().replace("__TS__",Math.round((new Date).getTime()/1e3)+"");console.log(e);var r=new Image;r.style.display="none";r.src=e}catch(i){}}},function(){});window.onbeforeunload=function(t){o.send_last()};var d=0;var v=0;var f=0;var g=setInterval(function(){var t=o.checkViewable(l);if(t.viewabilityState=="viewable"&&t.focus){d++}else{d=0}if(!o.DEBUG_MODE&&v*h/1e3>f){f++;o.recordVbInfo(f,t)}if(o.clicked||d>=c&&!o.DEBUG_MODE){t.vb=1;t.count=1;s(t,o);clearInterval(g);if(o.intersectionObserverSupported){intersectionObserverMonitor.disconnect()}o.vbinfo=null;o.cleanFlash()}if(o.DEBUG_MODE&&v*h/1e3>f){f++;t.count=f;s(t,o)}if(u>0&&v*h>u){clearInterval(g);if(o.intersectionObserverSupported){intersectionObserverMonitor.disconnect()}o.send_last();o.cleanFlash()}v++},h)};this.rcallback=function(t,e){var r=e;var i={};i.id=r.uniqueID;i.rta_seq=t.count;i.rta_fcs=t.focus?1:0;i.rta_ifr=t.servingScenario;i.rta_ver=r.version;i.rta_dt=Math.round(t.duration);i.rta_vb=t.vb;i.ord=Math.floor(Math.random()*1e8)+"0"+(new Date).getTime().toString();if(r.clicked){i.rta_clk=1}if(t.err){i.rta_err=t.err}if(r.finger){i.rta_fg=r.finger}var n=r.mergeParam(i,r.args);var a=r.jsonToQuery(n);r._rtb_send(a)};this.mergeParam=function(t,e){var r,i={};e=e||{};for(r in t){i[r]=t[r]}for(r in e){i[r]=e[r]}return i};this.jsonToQuery=function(t){var e=this;if(t){var r=[];for(var i in t){r.push(i+"="+encodeURIComponent(t[i]))}if(r.length){return r.join("&")}else{return""}}};this.checkFlashId=function(t){var e=this;if(t){var r=t.split("_");if(r&&r.length==2&&r[0]===e.uniqueID){return true}}return false};this.cleanFlash=function(){var t=this;var e=navigator.appName==="Microsoft Internet Explorer";for(var r in rtbasiaFlashRunNumsObj){if(!t.checkFlashId(r)){continue}var i=r+"_div";var n=r;var a=document.getElementById(i);var o=document.getElementById(n);if(e){o.style.display="none";(function s(){if(o.readyState==4){for(var t in o){if(typeof o[t]==="function"){o[t]=null}}o.parentNode.removeChild(o);a.parentNode.removeChild(a)}else{setTimeout(s,10)}})()}else{a.parentNode.removeChild(a)}}};this.createFlash=function(t,e,r){var i=this;rtbasiaFlashRunNumsObj[t]=0;console.log("create flash: "+t+","+e+","+r);var n=i.rtbhost+"/rtbasiavb.swf";var a=document.createElement("div");a.style.cssText="width:0px;height:0px;position:absolute;left:"+e+"px;top:"+r+"px;";a.id=t+"_div";a.innerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" id="'+t+'" width="1" height="1" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab"> <param name="movie" value="'+n+'" /> <param name="FlashVars" value="id='+t+'"> <param name="quality" value="high" /> <param name="bgcolor" value="#869ca7" /> <param name="allowScriptAccess" value="always" /> <embed src="'+n+'" FlashVars="id='+t+'" quality="high" bgcolor="#869ca7" width="1" height="1" name="'+t+'" align="middle" play="true" loop="true" quality="high" allowScriptAccess="always" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer"> </embed> </object>';document.body.appendChild(a)};this.loadFlash=function(){var t=this;var e=t.getBoundingClientRectRtb(t.cElemt);var r=e.width;var i=e.height;var n=20;var a=3;var o=r>n?r/n:1;var s=i>n?i/n:1;o=o>a?a:o;s=s>a?a:s;var c=r/(o+1);var h=i/(s+1);var u=0;var l=0;for(var d=1;d<=s;d++){var v=parseInt(d*h);for(var f=1;f<=o;f++){l++;(function(){var r=l;var i=f;var n=v;var a=t.uniqueID+"_"+r;var o=parseInt(i*c);var s=u;var h=o+e.left;var d=e.top+n;function g(){t.createFlash(a,h,d)}setTimeout(g,s)})();u=u>0?u+2:50}}t.args.rta_flsn=l};this.initRTB=function(elem){var that=this;that.cElemt=elem;that.args.rta_sr=screen.width+"x"+screen.height;if(elem){that.args.rta_eletn=elem.tagName;if(elem.name){that.args.rta_elenm=elem.name}if(elem.id){that.args.rta_eleid=elem.id}}if(elem&&that.flashCheck){that.loadFlash()}if(that.DEBUG_MODE){console.log("checkViewability intersectionObserverSupported: "+that.intersectionObserverSupported+":"+!window.rtbasiackflg)}if(that.intersectionObserverSupported&&elem){intersectionObserverMonitor=new IntersectionObserverViewabilityMonitor;intersectionObserverMonitor.beginMonitoring(elem)}if(that.IN_IFRAME){that.args.rta_page=document.referrer;try{that.args.rta_rf=top.document.referrer;that.args.rta_page=top.document.location.href}catch(e){}}else{that.args.rta_page=document.location.href;that.args.rta_rf=document.referrer}var ntivOb=that.intersectionObserverSupported&&that.isNative(IntersectionObserver)?"1":"0";that.args.rta_inobs=ntivOb;that.args.rta_fls=that.isFlashEnabled()?"1":"0";that.args.rta_liedlg=that.getHasLiedLanguages();that.args.rta_liedsize=that.getHasLiedResolution();that.args.rta_liedos=that.getHasLiedOs();that.args.rta_liedlbr=that.getHasLiedBrowser();that.lied=that.args.rta_liedos|that.args.rta_liedlbr;that.args.rta_evallh=eval.toString().length;if(!that.isNative(eval)){that.args.rta_eval=false}if(navigator.platform){that.args.rta_pf=navigator.platform}if(navigator.language){that.args.rta_lg=navigator.language}if(navigator.vendor){that.args.rta_vd=navigator.vendor}if(document.documentMode){that.args.rta_mod=document.documentMode}if(navigator.appName){that.args.rta_apn=navigator.appName}if(navigator.productSub){that.args.rta_prodsub=navigator.productSub}if(navigator.oscpu){that.args.rta_oscpu=navigator.oscpu}if("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0){that.args.rta_mbdi=true}if(typeof navigator.plugins==="undefined"){that.args.rta_plgs=false}};this.isFlashEnabled=function(){var t=false;try{var e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(e){t=true}}catch(r){if(navigator.mimeTypes["application/x-shockwave-flash"]!=undefined){t=true}}return t};this.getHasLiedLanguages=function(){if(typeof navigator.languages!=="undefined"){try{var t=navigator.languages[0].substr(0,2);if(t!==navigator.language.substr(0,2)){return true}}catch(e){return true}}return false};this.getHasLiedResolution=function(){if(screen.width<screen.availWidth){return true}if(screen.height<screen.availHeight){return true}return false};this.getHasLiedOs=function(){var t=navigator.userAgent.toLowerCase();var e=navigator.oscpu;var r=navigator.platform.toLowerCase();var i;if(t.indexOf("windows phone")>=0){i="Windows Phone"}else if(t.indexOf("win")>=0){i="Windows"}else if(t.indexOf("android")>=0){i="Android"}else if(t.indexOf("linux")>=0){i="Linux"}else if(t.indexOf("iphone")>=0||t.indexOf("ipad")>=0){i="iOS"}else if(t.indexOf("mac")>=0){i="Mac"}else{i="Other"}var n;if("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0){n=true}else{n=false}if(n&&i!=="Windows Phone"&&i!=="Android"&&i!=="iOS"&&i!=="Other"){return true}if(typeof e!=="undefined"){e=e.toLowerCase();if(e.indexOf("win")>=0&&i!=="Windows"&&i!=="Windows Phone"){return true}else if(e.indexOf("linux")>=0&&i!=="Linux"&&i!=="Android"){return true}else if(e.indexOf("mac")>=0&&i!=="Mac"&&i!=="iOS"){return true}else if(e.indexOf("win")===0&&e.indexOf("linux")===0&&e.indexOf("mac")>=0&&i!=="other"){return true}}if(r.indexOf("win")>=0&&i!=="Windows"&&i!=="Windows Phone"){return true}else if((r.indexOf("linux")>=0||r.indexOf("android")>=0||r.indexOf("pike")>=0)&&i!=="Linux"&&i!=="Android"){return true}else if((r.indexOf("mac")>=0||r.indexOf("ipad")>=0||r.indexOf("ipod")>=0||r.indexOf("iphone")>=0)&&i!=="Mac"&&i!=="iOS"){return true}else if(r.indexOf("win")===0&&r.indexOf("linux")===0&&r.indexOf("mac")>=0&&i!=="other"){return true}if(typeof navigator.plugins==="undefined"&&i!=="Windows"&&i!=="Windows Phone"){return true}return false};this.getHasLiedBrowser=function(){var t=navigator.userAgent.toLowerCase();var e=navigator.productSub;var r;if(t.indexOf("firefox")>=0){r="Firefox"}else if(t.indexOf("opera")>=0||t.indexOf("opr")>=0){r="Opera"}else if(t.indexOf("chrome")>=0){r="Chrome"}else if(t.indexOf("safari")>=0){r="Safari"}else if(t.indexOf("trident")>=0){r="Internet Explorer"}else{r="Other"}if((r==="Chrome"||r==="Safari"||r==="Opera")&&e!=="20030107"){return true}var i=eval.toString().length;if(i===37&&r!=="Safari"&&r!=="Firefox"&&r!=="Other"){return true}else if(i===39&&r!=="Internet Explorer"&&r!=="Other"){return true}else if(i===33&&r!=="Chrome"&&r!=="Opera"&&r!=="Other"){return true}var n;try{throw"a"}catch(a){try{a.toSource();n=true}catch(o){n=false}}if(n&&r!=="Firefox"&&r!=="Other"){return true}return false};this.checkViewable=function(t){var e=this;var r=new RTBCheck;r.focus=e.isInFocus();r.servingScenario=e.servingScenario;var i="ok";e.checkOnPage(r,e.cElemt);if(e.intersectionObserverSupported){i=e.checkIntersectionObserver(r,t)}if(e.flashCheck){e.checkFlashRate(r,t)}if(e.sameIframeCheck){e.checkSameIframe(r,e.cElemt,t)}var n=e.checkCssInvisibility(r,e.cElemt);var a=e.checkDomObscuring(r,e.cElemt,100-t);var o="ok";if(!e.IN_XD_IFRAME){o=e.checkTopDomObscuring(r,e.cElemt,100-t)}if(i!=="ok"||n!=="ok"||a!=="ok"||o!=="ok"){r.err=i+":"+n+":"+a+":"+o}return r};this.recordVbInfo=function(t,e){var r=this;try{var i=e.rootRect;var n=e.destRect;var a=e.target;var o=e.duration;var s=r.getBoundingClientRectRtb(r.cElemt);var c=i?Math.round(i.top)+","+Math.round(i.right)+","+Math.round(i.bottom)+","+Math.round(i.left)+","+Math.round(i.width)+","+Math.round(i.height):"";var h=n?Math.round(n.top)+","+Math.round(n.right)+","+Math.round(n.bottom)+","+Math.round(n.left)+","+Math.round(n.width)+","+Math.round(n.height):"";var u=s?Math.round(s.top)+","+Math.round(s.right)+","+Math.round(s.bottom)+","+Math.round(s.left)+","+Math.round(s.width)+","+Math.round(s.height):"";var l=a?a.tagName+","+a.name+","+a.id:"";var d=e.percentViewable?Math.round(e.percentViewable):0;var v=e.percentObscured?Math.round(e.percentObscured):0;var f=o?Math.round(o):"";var g={intersectionobserver:1,css_invisibility:2,dom_obscuring:3,top_dom_obscuring:4,flash:5,same_iframe:6,on_page:7};var m=t+":"+g[e.technique]+"|"+d+"|"+v+"|"+c+"|"+h+"|"+u+"|"+l+"|"+f;r.vbinfo.push(m)}catch(b){r.vbinfo.push(b+"|")}};this.send_first=function(t,e){var r=new RTBCheck;r.focus=e.isInFocus();r.servingScenario=e.servingScenario;r.count=0;if(!e.cElemt){r.err="NoEle"}t(r,e)};this.send_last=function(t,e){var e=this;if(!e.vbinfo){return}var r={};r.vbinfo=e.vbinfo.join("~");r.id=e.uniqueID;var i=e.cElemt;if(i){r.rta_eletn=i.tagName;if(i.name){r.rta_elenm=i.name}if(i.id){r.rta_eleid=i.id}}var n=e.getBodyRect(document);var a=e.getDocumentRect(document);r.bdrect=n.right+","+n.bottom+","+n.width+","+n.height;r.docrect=a.right+","+a.bottom+","+a.width+","+a.height;var o=e.mergeParam(e.args,r);var s=e.jsonToQuery(o);e.vbinfo=null;var c="//xvb.rtbasia.com/blank.gif?";e._rtb_send(s,c)};this.checkIntersectionObserver=function(t,e){try{t.technique=RTBCheck.INTERSECTIONOBSERVER;t.percentViewable=intersectionObserverMonitor.getPercentViewable();t.duration=intersectionObserverMonitor.getDuration();t.viewabilityState=t.percentViewable>=e?RTBCheck.VIEWABLE:RTBCheck.UNVIEWABLE;t.rootRect=intersectionObserverMonitor.getRootRect();t.destRect=intersectionObserverMonitor.getDestRect();t.target=intersectionObserverMonitor.getTarget();return"ok"}catch(r){return"interOb:"+r}};this.checkFlashRate=function(t,e){var r=this;var i=0;var n=0;for(var a in rtbasiaFlashRunNumsObj){if(!r.checkFlashId(a)){continue}i++;if(rtbasiaFlashRunNumsObj[a]>0){n++}if(!r.args.rta_flsr&&rtbasiaFlashRunNumsObj[a]>0){r.args.rta_flsr="1"}rtbasiaFlashRunNumsObj[a]=0}var o=i>0?n/i*100:0;t.percentViewable=o;t.technique=RTBCheck.FLASH;t.viewabilityState=o>=e?RTBCheck.VIEWABLE:RTBCheck.UNVIEWABLE};this.checkCssInvisibility=function(t,e){try{var r=this;if(r.cssHidden(e)){t.technique=RTBCheck.CSS_INVISIBILITY;t.viewabilityState=RTBCheck.UNVIEWABLE}return"ok"}catch(i){return"css:"+i}};this.cssHidden=function(t){var e=this;var r=e.getStyle(t,"visibility");var i=e.getStyle(t,"display");if(r=="hidden"||i=="none"){return true}return false};this.getStyle=function(t,e){try{if(window.getComputedStyle){var r=window.getComputedStyle(t,null);return r.getPropertyValue(e)}else{var r=t.currentStyle;return r.getAttribute(e)}}catch(i){return"style:"+i}};this.checkDomObscuring=function(t,e,r){try{var i=this;var n=i.getBoundingClientRectRtb(e),a=0,o=12,s=n.left+o,c=n.right-o,h=n.top+o,u=n.bottom-o,l=Math.floor(n.left+n.width/2),d=Math.floor(n.top+n.height/2),v=[{x:s,y:h},{x:l,y:h},{x:c,y:h},{x:s,y:d},{x:l,y:d},{x:c,y:d},{x:s,y:u},{x:l,y:u},{x:c,y:u}];var f=document.documentElement;var g=document.body;for(var m in v){if(v[m]&&v[m].x>=0&&v[m].y>=0){var b=document.elementFromPoint(v[m].x,v[m].y);if(b!=null&&b!=e&&!e.contains(b)&&f!=b&&g!=b){var p=i.getBoundingClientRectRtb(b);var w=i.overlapping(n,p);if(w>0){t.percentObscured=100*w;if(t.percentObscured>r){t.technique=RTBCheck.DOM_OBSCURING;t.viewabilityState=RTBCheck.UNVIEWABLE;return true}if(a>t.percentObscured){t.percentObscured=a}else{a=t.percentObscured}}}}}return"ok"}catch(R){return"dom:"+R}};this.checkTopDomObscuring=function(t,e,r){var i=this;try{if(window.frameElement==null){return"ok"}var n=top.document.documentElement;var a=top.document.body;var o=document.documentElement;var s=document.body;var c=window.frameElement;var h=i.getBoundingClientRectRtb(e);var u=i.getBoundingClientRectRtb(c);var l=i.getRootRect(document);h=i.appendTopRect(h,u,l);var d=0,v=12,f=h.left+v,g=h.right-v,m=h.top+v,b=h.bottom-v,p=Math.floor(h.left+h.width/2),w=Math.floor(h.top+h.height/2),R=[{x:f,y:m},{x:p,y:m},{x:g,y:m},{x:f,y:w},{x:p,y:w},{x:g,y:w},{x:f,y:b},{x:p,y:b},{x:g,y:b}];for(var O in R){if(R[O]&&R[O].x>=0&&R[O].y>=0){var _=top.document.elementFromPoint(R[O].x,R[O].y);if(_!=null&&_!=e&&!e.contains(_)&&o!=_&&n!=_&&c!=_&&s!=_&&a!=_){var y=i.getBoundingClientRectRtb(_);var E=i.overlapping(h,y);if(E>0){t.percentObscured=100*E;if(t.percentObscured>r){t.technique=RTBCheck.TOP_DOM_OBSCURING;t.viewabilityState=RTBCheck.UNVIEWABLE}if(d>t.percentObscured){t.percentObscured=d}else{d=t.percentObscured}}}}}return"ok"}catch(I){return"ifrdom:"+I}};this.appendTopRect=function(t,e,r){var i={left:t.left+e.left,right:t.right-r.width+e.right,top:t.top+e.top,bottom:t.bottom-r.height+e.bottom,width:t.width,height:t.height};var n=i.right-i.left;var a=i.bottom-i.top;if(n!=i.width){var o=(n-i.width)/2;i.left=i.left+o;i.right=i.right-o}if(a!=i.height){var s=(a-i.height)/2;i.top=i.top+s;i.bottom=i.bottom-s}return i};this.overlapping=function(t,e){var r=t.width*t.height;var i=Math.max(0,Math.min(t.right,e.right)-Math.max(t.left,e.left));var n=Math.max(0,Math.min(t.bottom,e.bottom)-Math.max(t.top,e.top));return i*n/r};this.checkSameIframe=function(t,e,r){var i=this;try{var n=window.frameElement;var a=i.getBoundingClientRectRtb(e);var o=i.getBoundingClientRectRtb(n);var s=i.getRootRect(document);var c=a.width*a.height;t.technique=RTBCheck.SAME_IFRAME;var h=i.computeRectIntersection(a,s);var u=i.appendTopRect(h,o,s);var l=i.getRootRect(top.document);var d=i.computeRectIntersection(u,l);var v=d.width*d.height;var f=v/c*100;t.percentViewable=f;var g=f>=r?RTBCheck.VIEWABLE:RTBCheck.UNVIEWABLE;t.viewabilityState=g;return"ok"}catch(m){return"sameifrchek:"+m}};this.checkOnPage=function(t,e){var r=this;try{t.technique=RTBCheck.ON_PAGE;var i=r.getBoundingClientRectRtb(e);var n=r.getRootRect(document);var a=i.width*i.height;var o=r.computeRectIntersection(i,n);var s=o.width*o.height;var c=s/a*100;t.percentViewable=c;var h=c>=50?RTBCheck.VIEWABLE:RTBCheck.UNVIEWABLE;t.viewabilityState=h;return"ok"}catch(u){return"onpagechek:"+u}};this.computeRectIntersection=function(t,e){var r=this;var i=Math.max(t.top,e.top);var n=Math.min(t.bottom,e.bottom);var a=Math.max(t.left,e.left);var o=Math.min(t.right,e.right);var s=o-a;var c=n-i;return s<0||c<0?r.getEmptyRect():{top:i,bottom:n,left:a,right:o,width:s,height:c}};this.getBoundingClientRectRtb=function(t){var e=t.getBoundingClientRect();if(!e)return;if(!e.width||!e.height){e={top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.right-e.left,height:e.bottom-e.top}}return e};this.getRootRect=function(t){var e=t.documentElement;var r=t.body;var i={top:0,left:0,right:e.clientWidth||r.clientWidth,width:e.clientWidth||r.clientWidth,bottom:e.clientHeight||r.clientHeight,height:e.clientHeight||r.clientHeight};return i};this.getBodyRect=function(t){var e=t.body;var r={top:0,left:0,right:e.clientWidth,width:e.clientWidth,bottom:e.clientHeight,height:e.clientHeight};return r};this.getDocumentRect=function(t){var e=t.documentElement;var r={top:0,left:0,right:e.clientWidth,width:e.clientWidth,bottom:e.clientHeight,height:e.clientHeight};return r};this.getEmptyRect=function(){return{top:0,bottom:0,left:0,right:0,width:0,height:0}};this.isInFocus=function(){var t=this;try{if(t.IN_XD_IFRAME){return true}if(window.top.document.hasFocus){return window.top.document.hasFocus()}}catch(e){if(t.DEBUG_MODE){console.log(e)}}return false};this._rtb_send=function(t,e){var r=this;var i=e?e:r._surl;var n=document.createElement("IMG");n.width="0";n.height="0";n.style.visibility="hidden";n.style.position="absolute";n.style.top="0";var a=null;try{var o=document.getElementsByTagName("script");a=o[o.length-1]}catch(s){}if(a){a.parentNode.insertBefore(n,a)}else{document.body.appendChild(n)}n.src=i+t}}function RTBCheck(){this.percentObscured=0;this.percentViewable=-1;this.viewabilityState="";this.vb=0;this.technique="";this.focus=null;this.servingScenario="";this.duration=-1;this.err=null}RTBCheck.UNMEASURABLE="unmeasurable";RTBCheck.VIEWABLE="viewable";RTBCheck.UNVIEWABLE="unviewable";RTBCheck.INTERSECTIONOBSERVER="intersectionobserver";RTBCheck.CSS_INVISIBILITY="css_invisibility";RTBCheck.DOM_OBSCURING="dom_obscuring";RTBCheck.TOP_DOM_OBSCURING="top_dom_obscuring";RTBCheck.FLASH="flash";RTBCheck.SAME_IFRAME="same_iframe";RTBCheck.ON_PAGE="on_page";function IntersectionObserverViewabilityMonitor(){this.intersectionObserverSupported=!!window.IntersectionObserver;var t=-1,e=0,r=[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1],i;var n=null;var a=null;var o=null;if(this.intersectionObserverSupported){i=new IntersectionObserver(s,{threshold:r});if(typeof window.addEventListener!="function"&&typeof window.attachEvent!="function"){i.POLL_INTERVAL=100}}this.getPercentViewable=function(){return e};this.getDuration=function(){return t};this.getRootRect=function(){return n};this.getDestRect=function(){return a};this.getTarget=function(){return o};this.beginMonitoring=function(t){if(!!t){i.observe(t)}};this.disconnect=function(){i.disconnect()};function s(r){if(r&&r.length){t=r[0].time;n=r[0].rootBounds;a=r[0].boundingClientRect;o=r[0].target;if(r[0].intersectionRatio!=="undefined"){e=r[0].intersectionRatio*100}}}}function _sendToRTBAsiaFlashVB(t,e,r){var i=rtbasiaFlashRunNumsObj[r];rtbasiaFlashRunNumsObj[r]=i+1}function addEvent(t,e,r,i){try{if(typeof t.addEventListener=="function"){t.addEventListener(e,r)}else{t.attachEvent("on"+e,r)}}catch(n){i(n)}}function triggerCheckVb(t,e){var r=e||{};var i=t||{};var n=new RTBViewability;n.DEBUG_MODE=r.debug?r.debug:false;n.args=i;var a=r.ad_elem;if(e.elid){a=e.elid==="document.body"?document.body:document.getElementById(e.elid)}var o=r.intc?r.intc:20;var s=r.intt?r.intt:100;var c=r.timeout?r.timeout:15e3;var h=r.cbk?r.cbk:null;var u=r.pvb?r.pvb:50;u=u<50?50:u>100?100:u;n.checkViewability(a,h,o,s,c,u)}function getReqPs(t){var e=t.indexOf("?");var r=e>0?t.substring(e+1):"",i={},n=r.split("&"),a=n.length,o=null,s=null;if(r.length==0){return null}for(var c=0;c<a;c++){var h=n[c].split("=");o=h[0];s=h[1];i[o]=s}return i}function checkScript(){var t=/trace2\.rtbasia\.com\/rtbasia_viewability.min.js/;var e=document.getElementsByTagName("script");var r=e.length;var i={};i.intc=true;i.intt=true;i.timeout=true;i.debug=true;i.no_trigger=true;i.elid=true;i.pvb=true;for(var n=0;n<r;n++){var a=e[n];if(a.src&&t.test(a.src)&&!a.getAttribute("rtba-vb-scpt-tag")){var o;try{a.setAttribute("rtba-vb-scpt-tag","a")}catch(f){o=f.message||f.description}var s=getReqPs(a.src);if(s){var c={};var h={};for(var u in s){if(i[u]){c[u]=s[u];continue}h[u]=s[u];if("click"==u){h[u]=decodeURIComponent(s[u])}}if(o){h["rta_erra"]=o}triggerCheckVb(h,c)}else{if(!window._rtba_args||!window._rtba_config){continue}var l=window._rtba_args||{};var d=window._rtba_config||{};if(o){l["rta_erra"]=o}window._rtba_args=null;window._rtba_config=null;var v=d.no_trigger?d.no_trigger:false;if(!v){triggerCheckVb(l,d)}}}}}window.RTBCheck=RTBCheck;window.RTBViewability=RTBViewability;window.IntersectionObserverViewabilityMonitor=IntersectionObserverViewabilityMonitor;window.triggerCheckVb=triggerCheckVb;window.rtbasiaFlashRunNumsObj=window.rtbasiaFlashRunNumsObj||{};window.sendToRTBAsiaFlashVB=window.sendToRTBAsiaFlashVB||_sendToRTBAsiaFlashVB;checkScript()})(window,document,navigator);